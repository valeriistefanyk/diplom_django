{% extends 'base.html' %}
{% load static %}
{% block add_head_link %}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>
    <script src="{% static 'js/jquery.min.js' %}"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/tempusdominus-bootstrap-4/5.0.0-alpha14/js/tempusdominus-bootstrap-4.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tempusdominus-bootstrap-4/5.0.0-alpha14/css/tempusdominus-bootstrap-4.min.css" />
{% endblock add_head_link %}

{% block title %}Сторінка директора{% endblock %}


{% block content %}
<div class="d-flex" id="wrapper">

    <!-- Sidebar -->
    <div class="bg-dark border-right" id="sidebar-wrapper">
        <div class="sidebar-heading text-light py-5">VMM Core Production</div>
        <div class="list-group list-group-flush">
            <a href="{% url 'director:home-page' %}"
                class="list-group-item list-group-item-action bg-dark text-light border-light border-top"><i
                    class="fa fa-home"></i>Головна</a>
            <a href="{% url 'director:reports' %}"
                class="list-group-item list-group-item-action bg-dark text-light border-light"><i
                    class="fa fa-table"></i>Звіти</a>
            <a href="{% url 'director:statistics' %}"
                class="list-group-item list-group-item-action bg-dark text-light border-light"><i
                    class="fa fa-check"></i>Статистика</a>
            <a href="{% url 'director:employees' %}"
                class="list-group-item list-group-item-action bg-dark text-light border-light border-bottom"><i
                    class="fa fa-user"></i>Працівники</a>
        </div>
    </div>
    <!-- /#sidebar-wrapper -->

    <!-- Page Content -->
    <div id="page-content-wrapper">

        <nav class="navbar navbar-expand-lg navbar-dark bg-dark border-bottom">
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav ml-auto mt-2 mt-lg-0">
                    <a class="nav-link text-light" href="#">Привіт, {{ user.username }}!</a>
                    <a class="nav-link text-warning" href="{% url 'mylogout' %}"><i
                            class="fa fa-arrow-right"></i>Вийти</a>

                </ul>
            </div>
        </nav>

        <div class="container-fluid">


            <h1 class="mt-4 text-center">Звіти</h1>

            <div class="container">
                <form class="form-inline" method="GET">
                        <div class="form-group mb-2">
                           <div class="input-group date" id="datetimepicker7" data-target-input="nearest">
                                <input type="text" value="{{ from_date }}" class="form-control datetimepicker-input" data-target="#datetimepicker7" name="from"/>
                                <div class="input-group-append" data-target="#datetimepicker7" data-toggle="datetimepicker">
                                    <div class="input-group-text"><i class="fa fa-calendar"></i></div>
                                </div>
                            </div>
                    </div>
                        <div class="form-group mx-sm-3 mb-2">
                           <div class="input-group date" id="datetimepicker8" data-target-input="nearest">
                                <input type="text" value="{{ to_date }}" class="form-control datetimepicker-input" data-target="#datetimepicker8"/ name="to">
                                <div class="input-group-append" data-target="#datetimepicker8" data-toggle="datetimepicker">
                                    <div class="input-group-text"><i class="fa fa-calendar"></i></div>
                                </div>
                            </div>
                    </div>
                    <button type="submit" class="btn btn-primary mb-2">Вибрати</button>
                </form>
                


                    <script type="text/javascript">
                        $(function () {
                            $('#datetimepicker7').datetimepicker({
                                format: 'L'
                            });
                            $('#datetimepicker8').datetimepicker({
                                format: 'L',
                                useCurrent: false
                            });
                            $("#datetimepicker7").on("change.datetimepicker", function (e) {
                                $('#datetimepicker8').datetimepicker('minDate', e.date);
                            });
                            $("#datetimepicker8").on("change.datetimepicker", function (e) {
                                $('#datetimepicker7').datetimepicker('maxDate', e.date);
                            });
                        });
                    </script>
                </div>


            <div class="content-text">
                {% if reports %}
                <table class="table_dark">
                    <tr>
                        <th>Дата звіту</th>
                        <th>Оформив</th>
                        <th>Машина</th>
                        <th>Мотогодини</th>
                        <th>Використано бензину</th>
                        <th>Стан машини</th>
                    </tr>
                    {% for report in reports %}
                    <tr>
                        <td>{{ report.date }}</td>
                        <td>{{ report.filled_up.user.first_nama }} {{ report.filled_up.user.last_name }}</td>
                        <td>{{ report.machine.full_name }}</td>
                        <td>{{ report.motohour}}</td>
                        <td>{{ report.fuel }}</td>
                        <td>{% if report.breakage %}В ремонті{% else %}Робоча{% endif %}</td>
                    </tr>
                    {% endfor %}
                </table>
                {% endif%}
        </div>
    <style>
        body {
            overflow-x: hidden;
        }

        .fa {
            margin-right: 10px;
        }

        #sidebar-wrapper {
            min-height: 100vh;
            margin-left: -15rem;
            -webkit-transition: margin .25s ease-out;
            -moz-transition: margin .25s ease-out;
            -o-transition: margin .25s ease-out;
            transition: margin .25s ease-out;
        }

        #sidebar-wrapper .sidebar-heading {
            padding: 0.875rem 1.25rem;
            font-size: 1.2rem;
        }

        #sidebar-wrapper .list-group {
            width: 15rem;
        }

        #page-content-wrapper {
            min-width: 100vw;
        }

        #wrapper.toggled #sidebar-wrapper {
            margin-left: 0;
        }

        @media (min-width: 768px) {
            #sidebar-wrapper {
                margin-left: 0;
            }

            #page-content-wrapper {
                min-width: 0;
                width: 100%;
            }

            #wrapper.toggled #sidebar-wrapper {
                margin-left: -15rem;
            }
        }

        /* TABLE----------------------- */
        .table_dark {
            font-size: 14px;
            width: 100%;
            text-align: left;
            border-collapse: collapse;
            background: #252F48;
            margin: 10px;
        }

        .table_dark th {
            color: #EDB749;
            border-bottom: 1px solid #37B5A5;
            padding: 12px 17px;
        }

        .table_dark td {
            color: #CAD4D6;
            border-bottom: 1px solid #37B5A5;
            border-right: 1px solid #37B5A5;
            padding: 7px 17px;
        }

        .table_dark tr:last-child td {
            border-bottom: none;
        }

        .table_dark td:last-child {
            border-right: none;
        }

        .table_dark tr:hover td {
            text-decoration: underline;
        }
    </style>



    {% endblock %}