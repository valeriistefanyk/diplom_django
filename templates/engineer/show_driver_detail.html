{% extends 'base.html' %}


{% block title %}Сторінка інженера{% endblock %}


{% block content %}
<div class="d-flex" id="wrapper">

    <!-- Sidebar -->
    <div class="bg-dark border-right" id="sidebar-wrapper">
        <div class="sidebar-heading text-light py-5">VMM Core Production</div>
        <div class="list-group list-group-flush">
            <a href="{% url 'engineer:home-page' %}"
                class="list-group-item list-group-item-action bg-dark text-light border-light border-top"><i
                    class="fa fa-home"></i>Головна</a>
            <a href="{% url 'engineer:reports' %}"
                class="list-group-item list-group-item-action bg-dark text-light border-light"><i
                    class="fa fa-table"></i>Звіти</a>
            <a href="{% url 'engineer:drivers' %}"
                class="list-group-item list-group-item-action bg-dark text-light border-light"><i
                    class="fa fa-truck"></i>Старші водії</a>
            <a href="{% url 'engineer:fix_machines' %}"
                class="list-group-item list-group-item-action bg-dark text-light border-light border-bottom"><i
                    class="fa fa-wrench"></i>Інформація про ремонт машин</a>
            <a href="{% url 'engineer:work_days' %}"
                class="list-group-item list-group-item-action bg-dark text-light border-light border-bottom"><i
                    class="fa fa-calendar"></i>Графік роботи</a>
        </div>
    </div>
    <!-- /#sidebar-wrapper -->

    <!-- Page Content -->
    <div id="page-content-wrapper">

        <nav class="navbar navbar-expand-lg navbar-dark bg-dark border-bottom">
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav ml-auto mt-2 mt-lg-0">
                    <a class="nav-link text-light" href="#">Привіт, {{ user.username }}!</a>
                    <a class="nav-link text-warning" href="{% url 'mylogout' %}"><i
                            class="fa fa-arrow-right"></i>Вийти</a>

                </ul>
            </div>
        </nav>

        <div class="container-fluid">
            <h1 class="mt-4 text-center">Інформація про водія</h1>
            <div class="content-text my-4">
                <div class="col-md-auto">
                    <div class="card shadow bg-white rounded" style="width: 18rem;">
                        <img src="{{driver.avatar.url}}" style="height: 20rem;" alt="{{driver.full_name}}">
                        <div class="card-body">
                            <h4 class="text-center">{{driver.full_name}}</h4>
                            <h5 class="text-center">{{driver.user.username}}</h5>
                            <p class="card-text">Дата народження: {{driver.date_of_birth}}</p>
                            <p class="card-text">Email: {{driver.user.email}}</p>
                            <p class="card-text">Телефон: {{driver.phones}}</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-auto offset-1">
                    <div class="driver_reports">
                        {% if reports_driver %}
                        <h3 class="mb-4">Звіти водія</h3>
                        <div class="shadow bg-white rounded my-5 p-4">
                            {% for report in reports_driver %}
                            <h5 class="font-weight-bold text-warning">Звіт №2</h5>
                            <p><span class="font-weight-bold">Звіт за:</span> {{ report.date }}</p>
                            <p><span class="font-weight-bold">Машина:</span> {{ report.machine.full_name }}</p>
                            <p><span class="font-weight-bold">Мотогодини:</span> {{ report.motohour}}</p>
                            <p><span class="font-weight-bold">Використано бензину:</span> {{ report.fuel }}</p>
                            {% if report.breakage %}
                            <br>
                            <p class="text-danger font-weight-bold">Поломка машини!</p>
                            <p>Інформація про поломку: ---- ДОБАВИТЬ ПОЛЕ В БД ----</p>
                            {% endif %}
                            <br>
                            <hr>
                            {% endfor %}
                        </div>
                        {% else%}
                        <p>У цього старшого водія звітів немає</p>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
        <style>
            body {
                overflow-x: hidden;
            }

            .fa {
                margin-right: 10px;
            }

            .content-text {
                display: flex;
            }

            #sidebar-wrapper {
                min-height: 100vh;
                margin-left: -15rem;
                -webkit-transition: margin .25s ease-out;
                -moz-transition: margin .25s ease-out;
                -o-transition: margin .25s ease-out;
                transition: margin .25s ease-out;
            }

            #sidebar-wrapper .sidebar-heading {
                padding: 0.875rem 1.25rem;
                font-size: 1.2rem;
            }

            #sidebar-wrapper .list-group {
                width: 15rem;
            }

            #page-content-wrapper {
                min-width: 100vw;
            }

            #wrapper.toggled #sidebar-wrapper {
                margin-left: 0;
            }

            @media (min-width: 768px) {
                #sidebar-wrapper {
                    margin-left: 0;
                }

                #page-content-wrapper {
                    min-width: 0;
                    width: 100%;
                }

                #wrapper.toggled #sidebar-wrapper {
                    margin-left: -15rem;
                }
            }

            /* TABLE----------------------- */
            .table_dark {
                font-size: 14px;
                width: 100%;
                text-align: left;
                border-collapse: collapse;
                background: #252F48;
                margin: 10px;
            }

            .table_dark th {
                color: #EDB749;
                border-bottom: 1px solid #37B5A5;
                padding: 12px 17px;
            }

            .table_dark td {
                color: #CAD4D6;
                border-bottom: 1px solid #37B5A5;
                border-right: 1px solid #37B5A5;
                padding: 20px 27px;
            }

            .table_dark tr:last-child td {
                border-bottom: none;
            }

            .table_dark td:last-child {
                border-right: none;
            }

            .table_dark tr:hover td {
                text-decoration: underline;
            }
        </style>

        {% endblock %}