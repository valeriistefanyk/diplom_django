{% extends 'base.html' %}

{% block title %}Зробити звіт{% endblock %}

{% block content %}


    <nav class="navbar navbar-expand-md navbar-dark bg-dark">
        <div class="navbar-collapse collapse w-100 order-3 dual-collapse2">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                    <a class="nav-link" href="#">Привіт, {{ user.username }}!</a>
                </li>
                <li class="nav-item">
                    <a href="{% url 'driver:home-page' %}" class="nav-link">Кабінет</a>
                </li>
                <li class="nav-item">
                    <a href="{% url 'mylogout' %}" class="nav-link">Вийти</a>
                </li>
            
            </ul>
        </div>
    </nav>


    <h2>Створення звіту</h2>
    <form action="{% url 'driver:test_report' %}" method="POST">
        {% csrf_token %}
        <p><label for="date">Дата:</label>
        <input type="date" value="{{ date_today }}" name="date" id="date" required></p>
        

        

        <p>Які машини оберете для звітності:</p>
        {% for machine in can_use_machines %}
            <p><input type="checkbox" name="choices" value="{{machine.id}}" id="machine{{machine.id}}" {% if machine.el %}checked{% endif %}>
                <label for="machine{{machine.id}}"> {{machine.full_name}}</label>
            </p>
        {% endfor %}

            <input type="submit" name="selectMachines" value="Обрати ці машини">
        

        {% if selected_machine_list %}
            {% for machine in selected_machine_list %}
                
                <div class="form-row bg-light col-md-6 mx-auto">
                    
                    <div class="form-group col-md-12">
                        <p><b>Машина {{machine.full_name}}</b></p>
                      </div>
                    <div class="form-group col-md-6">
                      <label for="motog{{machine.id}}">Мотогини</label>
                      <input type="number" name="motohour" class="form-control" id="motog{{machine.id}}" placeholder="Мотогодини (у мото/год)" required>
                    </div>
                    <div class="form-group col-md-6">
                      <label for="fuel{{machine.id}}">Бензин</label>
                      <input type="number" step="0.1" name="fuel" class="form-control" id="fuel{{machine.id}}" placeholder="Бензин (у літрах)" required>
                    </div>


                    <!-- <div class="form-check">
                        <input class="form-check-input" type="radio" name="breakage" id="exampleRadios1" value="False" checked>
                        <label class="form-check-label" for="exampleRadios1">
                          Поломок немає
                        </label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" type="radio" name="breakage" id="exampleRadios2" value="True">
                        <label class="form-check-label" for="exampleRadios2">
                          Поломка є (якщо є інформація - вказати)
                        </label>
                      </div> -->

                    <div class="custom-control custom-checkbox my-1 mr-sm-2">
                        <input type="hidden" value="off" name="breakage">
                        <input type="checkbox" value="on" name="breakage" class="custom-control-input" id="breakage{{machine.id}}">
                        
                        <label class="custom-control-label" for="breakage{{machine.id}}">Поломка?</label>
                    </div>
                  
                  <div class="form-group col-md-12">
                    <label for="info_breakage{{machine.id}}">Інформація про поломку</label>
                    <textarea class="form-control" name="breakage_info" id="info_breakage{{machine.id}}" rows="3"></textarea>
                  </div>
                </div>
            {% endfor %}
            <div class="form-row bg-light col-md-6 mx-auto">
                <div class="form-group col-md-12">
                    <input type="submit" name="sendData" value="Відправити дані">
                </div>
            </div>

            {% elif selected_machine_bool %}
                <p>Вы не выбрали машины!</p>
        {% endif %}

        
        
        
    </form>

{% endblock %}